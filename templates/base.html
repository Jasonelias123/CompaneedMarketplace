<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ brand_tagline }} - AI-powered solutions for HVAC companies to book more jobs, reduce costs, and scale profits.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">
    <meta property="og:title" content="{{ brand_name }} - {{ brand_tagline }}">
    <meta property="og:description" content="AI-powered solutions for HVAC companies to book more jobs, reduce costs, and scale profits.">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="{{ request.url }}">
    <meta property="twitter:title" content="{{ brand_name }} - {{ brand_tagline }}">
    <meta property="twitter:description" content="AI-powered solutions for HVAC companies to book more jobs, reduce costs, and scale profits.">
    
    <link rel="canonical" href="{{ request.url }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
    
    <title>{% block title %}{{ brand_name }} - {{ brand_tagline }}{% endblock %}</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS with custom config -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        accent: '#22D3EE',
                        glow: '#A78BFA'
                    },
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                        'display': ['Manrope', 'Inter', 'system-ui', 'sans-serif']
                    },
                    container: {
                        center: true,
                        padding: '1rem',
                        screens: {
                            'sm': '640px',
                            'md': '768px',
                            'lg': '1024px',
                            'xl': '1280px'
                        }
                    },
                    boxShadow: {
                        'glass': '0 10px 30px rgba(0,0,0,0.15)',
                        'glow': '0 0 20px rgba(167, 139, 250, 0.3)'
                    }
                }
            }
        }
    </script>
    
    <!-- Theme Detection Script -->
    <script>
        // Initialize theme before page load to prevent flash
        (function() {
            const stored = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = stored || (prefersDark ? 'dark' : 'light');
            document.documentElement.className = theme === 'dark' ? 'dark' : '';
        })();
    </script>
    
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "LocalBusiness",
        "name": "{{ brand_name }}",
        "description": "{{ brand_tagline }}",
        "url": "{{ request.url_root }}",
        "telephone": "{{ brand_phone }}",
        "email": "{{ brand_email }}",
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "{{ brand_city }}"
        },
        "serviceArea": {
            "@type": "Place",
            "name": "Miami, South Florida, Nationwide"
        },
        "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "HVAC AI Services",
            "itemListElement": [
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "24/7 AI Answering & Booking"
                    }
                },
                {
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": "Lead Reactivation AI"
                    }
                }
            ]
        }
    }
    </script>
    
    {% block head_extra %}{% endblock %}
</head>

<body class="bg-white dark:bg-gray-900 text-gray-900 dark:text-white transition-colors duration-300">
    {% include 'partials/header.html' %}
    
    <main>
        {% block content %}{% endblock %}
    </main>
    
    {% include 'partials/footer.html' %}
    
    <!-- Core JavaScript -->
    <script src="{{ url_for('static', filename='theme-toggle.js') }}"></script>
    
    <!-- Smooth scrolling and reveal animations -->
    <script>
        // Smooth anchor scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Reveal on scroll animation
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('opacity-100', 'translate-y-0');
                    entry.target.classList.remove('opacity-0', 'translate-y-8');
                }
            });
        }, observerOptions);
        
        // Observe all elements with data-reveal attribute
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('[data-reveal]').forEach(el => {
                el.classList.add('opacity-0', 'translate-y-8', 'transition-all', 'duration-700');
                observer.observe(el);
            });
        });
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html>