<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered ROI Calculator - Companeeds</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#7c3aed',
                        secondary: '#a78bfa',
                        accent: '#22D3EE',
                        success: '#10b981',
                        dark: '#1a1a2e'
                    }
                }
            }
        }
    </script>
    
    <style>
        .glass-effect {
            background: rgba(26, 26, 46, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(124, 58, 237, 0.3);
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.08) !important;
            border: 2px solid rgba(255, 255, 255, 0.2) !important;
            color: white !important;
        }
        
        .input-field:focus {
            background: rgba(255, 255, 255, 0.12) !important;
            border-color: #7c3aed !important;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2) !important;
        }
        
        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.5) !important;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }
        
        .radio-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .radio-card:hover {
            background: rgba(124, 58, 237, 0.1);
            border-color: rgba(124, 58, 237, 0.5);
            transform: translateY(-2px);
        }
        
        .radio-card.selected {
            background: rgba(124, 58, 237, 0.2);
            border-color: #7c3aed;
            box-shadow: 0 4px 20px rgba(124, 58, 237, 0.3);
        }
        
        .loading-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            margin: 0 4px;
            border-radius: 50%;
            background: #7c3aed;
            animation: loading 1.4s ease-in-out infinite both;
        }
        
        .loading-dot:nth-child(1) { animation-delay: 0s; }
        .loading-dot:nth-child(2) { animation-delay: 0.2s; }
        .loading-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes loading {
            0%, 80%, 100% {
                transform: scale(0);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        .shimmer-effect {
            background: linear-gradient(90deg, transparent, rgba(124, 58, 237, 0.3), transparent);
            background-size: 200% 100%;
            animation: shimmer 3s infinite;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-900 via-purple-900 to-indigo-900 min-h-screen text-white">
    
    <!-- Animated Background -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-purple-500/20 rounded-full filter blur-3xl animate-float"></div>
        <div class="absolute bottom-1/3 right-1/3 w-80 h-80 bg-indigo-500/20 rounded-full filter blur-3xl animate-float" style="animation-delay: 3s;"></div>
    </div>
    
    <!-- Main Container -->
    <div class="relative z-10 container mx-auto px-4 py-12">
        
        <!-- Header -->
        <div class="text-center mb-10">
            <div class="inline-flex items-center px-4 py-2 bg-purple-500/20 border border-purple-500/40 rounded-full text-purple-300 text-sm font-semibold mb-4">
                <span class="w-2 h-2 bg-purple-400 rounded-full mr-2 animate-pulse"></span>
                AI-Powered ROI Calculator
            </div>
            
            <h1 class="text-4xl md:text-6xl font-bold mb-4">
                Discover Your <span class="text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-cyan-400">Hidden Revenue</span>
            </h1>
            
            <p class="text-lg text-gray-300 max-w-2xl mx-auto">
                Every missed call is money left on the table. Our AI calculates your exact monthly savings potential in seconds.
            </p>
        </div>
        
        <!-- Calculator Card -->
        <div class="max-w-4xl mx-auto glass-effect rounded-3xl p-8 md:p-12 shadow-2xl">
            
            <!-- Progress Bar -->
            <div class="flex items-center justify-between mb-10 relative">
                <div class="absolute top-5 left-0 right-0 h-1 bg-gray-600 rounded-full"></div>
                <div class="absolute top-5 left-0 h-1 bg-gradient-to-r from-purple-500 to-cyan-500 rounded-full transition-all duration-500" id="progressBar" style="width: 25%"></div>
                
                <div class="relative flex justify-between w-full">
                    <div class="text-center z-10">
                        <div class="w-10 h-10 rounded-full bg-purple-500 text-white flex items-center justify-center font-bold" id="step1Circle">1</div>
                        <span class="text-xs mt-2 block">Contact</span>
                    </div>
                    <div class="text-center z-10">
                        <div class="w-10 h-10 rounded-full bg-gray-600 text-gray-400 flex items-center justify-center font-bold" id="step2Circle">2</div>
                        <span class="text-xs mt-2 block text-gray-400">Business Info</span>
                    </div>
                    <div class="text-center z-10">
                        <div class="w-10 h-10 rounded-full bg-gray-600 text-gray-400 flex items-center justify-center font-bold" id="step3Circle">3</div>
                        <span class="text-xs mt-2 block text-gray-400">AI Analysis</span>
                    </div>
                    <div class="text-center z-10">
                        <div class="w-10 h-10 rounded-full bg-gray-600 text-gray-400 flex items-center justify-center font-bold" id="step4Circle">âœ¨</div>
                        <span class="text-xs mt-2 block text-gray-400">Results</span>
                    </div>
                </div>
            </div>
            
            <form id="calculatorForm">
                <!-- Step 1: Contact Info -->
                <div class="form-step" id="step1">
                    <h2 class="text-3xl font-bold mb-2">Let's Get Started! ðŸ‘‹</h2>
                    <p class="text-gray-400 mb-8">First, tell us who's ready to transform their HVAC business</p>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-white font-medium mb-2">Your Name</label>
                            <input type="text" name="name" required 
                                   class="input-field w-full px-4 py-3 rounded-lg outline-none transition-all"
                                   placeholder="John Smith">
                        </div>
                        <div>
                            <label class="block text-white font-medium mb-2">Company Name</label>
                            <input type="text" name="company" required 
                                   class="input-field w-full px-4 py-3 rounded-lg outline-none transition-all"
                                   placeholder="ABC HVAC Services">
                        </div>
                        <div>
                            <label class="block text-white font-medium mb-2">Email Address</label>
                            <input type="email" name="email" required 
                                   class="input-field w-full px-4 py-3 rounded-lg outline-none transition-all"
                                   placeholder="john@hvaccompany.com">
                        </div>
                        <div>
                            <label class="block text-white font-medium mb-2">Phone Number</label>
                            <input type="tel" name="phone" required 
                                   class="input-field w-full px-4 py-3 rounded-lg outline-none transition-all"
                                   placeholder="(305) 555-0123">
                        </div>
                    </div>
                </div>
                
                <!-- Step 2: Business Info -->
                <div class="form-step hidden" id="step2">
                    <h2 class="text-3xl font-bold mb-2">Quick Business Info ðŸ“Š</h2>
                    <p class="text-gray-400 mb-8">Just two quick questions to calculate your savings</p>
                    
                    <div class="space-y-8">
                        <div>
                            <label class="block text-white font-medium mb-4">How many calls do you think you miss per day?</label>
                            <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="missedCalls" value="0-3" class="sr-only">
                                    <div class="text-center">
                                        <span class="text-2xl mb-2 block">â˜Žï¸</span>
                                        <span class="font-semibold">0-3 calls</span>
                                    </div>
                                </label>
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="missedCalls" value="4-10" class="sr-only">
                                    <div class="text-center">
                                        <span class="text-2xl mb-2 block">ðŸ“ž</span>
                                        <span class="font-semibold">4-10 calls</span>
                                    </div>
                                </label>
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="missedCalls" value="10-20" class="sr-only">
                                    <div class="text-center">
                                        <span class="text-2xl mb-2 block">ðŸ“±</span>
                                        <span class="font-semibold">10-20 calls</span>
                                    </div>
                                </label>
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="missedCalls" value="20+" class="sr-only">
                                    <div class="text-center">
                                        <span class="text-2xl mb-2 block">ðŸ”¥</span>
                                        <span class="font-semibold">20+ calls</span>
                                    </div>
                                </label>
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="missedCalls" value="unsure" class="sr-only">
                                    <div class="text-center">
                                        <span class="text-2xl mb-2 block">ðŸ¤”</span>
                                        <span class="font-semibold">Not Sure</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-white font-medium mb-4">What is your annual revenue?</label>
                            <div class="grid grid-cols-2 lg:grid-cols-3 gap-4">
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="revenue" value="<1M" class="sr-only">
                                    <span class="font-bold text-purple-300">Less than $1M</span>
                                </label>
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="revenue" value="1-3M" class="sr-only">
                                    <span class="font-bold text-purple-300">$1-3M</span>
                                </label>
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="revenue" value="4-10M" class="sr-only">
                                    <span class="font-bold text-purple-300">$4-10M</span>
                                </label>
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="revenue" value="10-20M" class="sr-only">
                                    <span class="font-bold text-purple-300">$10-20M</span>
                                </label>
                                <label class="radio-card rounded-xl p-4 cursor-pointer">
                                    <input type="radio" name="revenue" value="20M+" class="sr-only">
                                    <span class="font-bold text-purple-300">$20M+</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 3: AI Analysis -->
                <div class="form-step hidden" id="step3">
                    <div class="text-center py-12">
                        <div class="mb-8">
                            <div class="inline-flex items-center justify-center w-24 h-24 bg-purple-500/20 rounded-full">
                                <svg class="w-12 h-12 text-purple-400 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                                </svg>
                            </div>
                        </div>
                        <h3 class="text-2xl font-bold mb-4">AI is Calculating Your Savings...</h3>
                        <div class="flex items-center justify-center mb-4">
                            <span class="loading-dot"></span>
                            <span class="loading-dot"></span>
                            <span class="loading-dot"></span>
                        </div>
                        <p class="text-gray-400" id="analysisText">Analyzing your business metrics...</p>
                        <div class="mt-8 text-sm text-gray-500">
                            AI is calculating your specific monthly savings potential
                        </div>
                    </div>
                </div>
                
                <!-- Step 4: Results -->
                <div class="form-step hidden" id="step4">
                    <div class="text-center mb-8">
                        <h2 class="text-4xl font-bold mb-4">Your Monthly Savings ðŸŽ‰</h2>
                        <div class="text-5xl md:text-6xl font-black text-green-400 mb-2" id="totalSavings">$0</div>
                        <p class="text-xl text-gray-300">Every Month with Companeeds AI</p>
                    </div>
                    
                    <!-- Reward Display -->
                    <div class="glass-effect rounded-2xl p-8 mb-8 border-2 border-yellow-500/30">
                        <img id="rewardImage" src="" alt="" class="w-full h-48 object-cover rounded-xl mb-4">
                        <h3 class="text-2xl font-bold mb-2" id="rewardTitle">Loading...</h3>
                        <p class="text-gray-300" id="rewardDescription">Calculating...</p>
                    </div>
                    
                    <!-- Metrics Grid -->
                    <div class="grid md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-white/5 rounded-xl p-4 text-center">
                            <div class="text-2xl font-bold text-purple-400" id="missedCallsMetric">0</div>
                            <p class="text-xs text-gray-400">Calls Saved/Mo</p>
                        </div>
                        <div class="bg-white/5 rounded-xl p-4 text-center">
                            <div class="text-2xl font-bold text-cyan-400" id="jobsBookedMetric">0</div>
                            <p class="text-xs text-gray-400">Extra Jobs/Mo</p>
                        </div>
                        <div class="bg-white/5 rounded-xl p-4 text-center">
                            <div class="text-2xl font-bold text-green-400" id="roiMetric">0%</div>
                            <p class="text-xs text-gray-400">ROI Increase</p>
                        </div>
                        <div class="bg-white/5 rounded-xl p-4 text-center">
                            <div class="text-2xl font-bold text-yellow-400" id="yearlyProjection">$0</div>
                            <p class="text-xs text-gray-400">Annual Total</p>
                        </div>
                    </div>
                    
                    <!-- CTA -->
                    <div class="text-center bg-gradient-to-r from-purple-600/20 to-indigo-600/20 rounded-2xl p-8">
                        <h3 class="text-2xl font-bold mb-4">Ready to Save $<span id="ctaSavings">0</span>/Month?</h3>
                        <button type="button" onclick="window.location.href='#contact'" 
                                class="px-8 py-4 bg-gradient-to-r from-purple-600 to-cyan-500 text-white font-bold rounded-full hover:scale-105 transform transition-all">
                            ðŸš€ Get Your Free AI Demo Now
                        </button>
                        <p class="text-sm text-gray-400 mt-4">See our AI answering YOUR calls in 15 minutes</p>
                    </div>
                </div>
            </form>
            
            <!-- Navigation -->
            <div class="flex justify-between mt-8" id="navigation">
                <button type="button" onclick="previousStep()" id="prevBtn" 
                        class="px-6 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-semibold transition-all hidden">
                    â† Back
                </button>
                <button type="button" onclick="nextStep()" id="nextBtn" 
                        class="px-8 py-3 bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 rounded-lg font-semibold transition-all ml-auto shimmer-effect">
                    Continue â†’
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // Gemini API Configuration
        const GEMINI_API_KEY = 'AIzaSyCJq9mxP3S28w-z506YmBJmSycGhCvtEhw';
        const GEMINI_API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${GEMINI_API_KEY}`;
        
        let currentStep = 1;
        const totalSteps = 4;
        let formData = {};
        
        // Radio card selection
        document.querySelectorAll('.radio-card').forEach(card => {
            card.addEventListener('click', function() {
                this.parentElement.querySelectorAll('.radio-card').forEach(c => {
                    c.classList.remove('selected');
                });
                this.classList.add('selected');
                this.querySelector('input').checked = true;
            });
        });
        
        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            const width = (currentStep / totalSteps) * 100;
            progressBar.style.width = width + '%';
            
            // Update circles
            for (let i = 1; i <= totalSteps; i++) {
                const circle = document.getElementById(`step${i}Circle`);
                const label = circle.parentElement.querySelector('span');
                
                if (i < currentStep) {
                    circle.classList.add('bg-green-500', 'text-white');
                    circle.classList.remove('bg-gray-600', 'text-gray-400', 'bg-purple-500');
                    if (i < totalSteps) circle.textContent = 'âœ”';
                    label.classList.remove('text-gray-400');
                } else if (i === currentStep) {
                    circle.classList.add('bg-purple-500', 'text-white');
                    circle.classList.remove('bg-gray-600', 'text-gray-400', 'bg-green-500');
                    label.classList.remove('text-gray-400');
                } else {
                    circle.classList.add('bg-gray-600', 'text-gray-400');
                    circle.classList.remove('bg-purple-500', 'text-white', 'bg-green-500');
                    label.classList.add('text-gray-400');
                }
            }
        }
        
        function validateStep() {
            const currentStepElement = document.getElementById(`step${currentStep}`);
            let isValid = true;
            
            currentStepElement.querySelectorAll('input[required]').forEach(input => {
                if (!input.value) {
                    input.classList.add('border-red-500');
                    isValid = false;
                } else {
                    input.classList.remove('border-red-500');
                }
            });
            
            if (currentStep === 2) {
                if (!document.querySelector('input[name="missedCalls"]:checked') || 
                    !document.querySelector('input[name="revenue"]:checked')) {
                    alert('Please select all options');
                    isValid = false;
                }
            }
            
            return isValid;
        }
        
        function saveFormData() {
            const currentStepElement = document.getElementById(`step${currentStep}`);
            
            currentStepElement.querySelectorAll('input').forEach(input => {
                if (input.type === 'radio') {
                    if (input.checked) {
                        formData[input.name] = input.value;
                    }
                } else {
                    formData[input.name] = input.value;
                }
            });
        }
        
        async function nextStep() {
            if (!validateStep()) return;
            
            saveFormData();
            
            if (currentStep === 2) {
                // Move directly to AI analysis after step 2
                document.getElementById(`step${currentStep}`).classList.add('hidden');
                currentStep = 3;
                document.getElementById(`step${currentStep}`).classList.remove('hidden');
                updateProgress();
                document.getElementById('navigation').classList.add('hidden');
                
                // Run AI analysis
                await runAIAnalysis();
            } else if (currentStep < 2) {
                document.getElementById(`step${currentStep}`).classList.add('hidden');
                currentStep++;
                document.getElementById(`step${currentStep}`).classList.remove('hidden');
                updateProgress();
                updateNavButtons();
            }
        }
        
        function previousStep() {
            if (currentStep > 1 && currentStep !== 3 && currentStep !== 4) {
                document.getElementById(`step${currentStep}`).classList.add('hidden');
                currentStep--;
                document.getElementById(`step${currentStep}`).classList.remove('hidden');
                updateProgress();
                updateNavButtons();
            }
        }
        
        function updateNavButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            if (currentStep === 1) {
                prevBtn.classList.add('hidden');
            } else {
                prevBtn.classList.remove('hidden');
            }
            
            if (currentStep === 2) {
                nextBtn.textContent = 'Calculate My Monthly Savings â†’';
            } else {
                nextBtn.textContent = 'Continue â†’';
            }
        }
        
        async function runAIAnalysis() {
            const analysisText = document.getElementById('analysisText');
            const messages = [
                'Analyzing ' + formData.company + ' metrics...',
                'Calculating missed revenue opportunities...',
                'Computing AI efficiency gains...',
                'Estimating CSR cost reductions...',
                'Generating your personalized savings report...'
            ];
            
            let messageIndex = 0;
            const messageInterval = setInterval(() => {
                if (messageIndex < messages.length) {
                    analysisText.textContent = messages[messageIndex];
                    messageIndex++;
                }
            }, 1000);
            
            try {
                // Create prompt for Gemini
                const prompt = `You are an HVAC business analyst AI. Calculate MONTHLY savings for this HVAC company.

COMPANY DATA:
- Company Name: ${formData.company}
- Annual Revenue: ${formData.revenue}
- Missed Calls Per Day: ${formData.missedCalls}

Use these HVAC industry standards:
- Average job value: $7,500
- Current call conversion rate: 30%
- AI conversion rate: 45%
- Average CSR salary: $45,000/year
- Typical HVAC company has 3 CSRs
- AI handles 60% of call volume

CALCULATE THE FOLLOWING MONTHLY AMOUNTS:

1. MISSED CALL REVENUE (Monthly):
   - Take the missed calls range and use the midpoint
   - Calculate monthly missed calls (multiply by 30)
   - Apply 45% AI conversion rate vs 30% current
   - Multiply by $7,500 average job value
   
2. CSR COST SAVINGS (Monthly):
   - Assume 3 CSRs at $45,000/year each
   - AI handles 60% of workload
   - Include 30% overhead
   - Divide by 12 for monthly
   
3. 24/7 AVAILABILITY GAINS (Monthly):
   - After-hours is 35% of call volume
   - Emergency calls worth 2x normal ($15,000)
   - Calculate based on annual revenue divided by 12
   
4. EFFICIENCY IMPROVEMENTS (Monthly):
   - 15% conversion rate improvement
   - 20% more maintenance contracts
   - Based on their annual revenue divided by 12

Return a JSON object with MONTHLY amounts:
{
  "totalMonthlySavings": [number],
  "missedCallRevenue": [number],
  "csrCostSavings": [number],
  "afterHoursRevenue": [number],
  "efficiencyGains": [number],
  "additionalJobsMonthly": [number],
  "callsSavedMonthly": [number],
  "roiPercentage": [number],
  "yearlyProjection": [number (monthly x 12)]
}

Be specific with MONTHLY numbers. Annual revenue ranges: <1M means $800K/year, 1-3M means $2M/year, 4-10M means $7M/year, 10-20M means $15M/year, 20M+ means $25M/year. Divide by 12 for monthly.`;

                const response = await fetch(GEMINI_API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }],
                        generationConfig: {
                            temperature: 0.7,
                            maxOutputTokens: 1024,
                        }
                    })
                });
                
                if (!response.ok) {
                    throw new Error('API request failed');
                }
                
                const data = await response.json();
                const aiResponse = data.candidates?.[0]?.content?.parts?.[0]?.text;
                
                // Parse AI response
                let aiCalculations;
                try {
                    const jsonMatch = aiResponse.match(/\{[\s\S]*\}/);
                    if (jsonMatch) {
                        aiCalculations = JSON.parse(jsonMatch[0]);
                    } else {
                        throw new Error('Invalid JSON response');
                    }
                } catch (parseError) {
                    console.error('Parse error:', parseError);
                    aiCalculations = calculateFallbackValues();
                }
                
                formData.aiResults = aiCalculations;
                
            } catch (error) {
                console.error('Gemini API error:', error);
                formData.aiResults = calculateFallbackValues();
            }
            
            setTimeout(() => {
                clearInterval(messageInterval);
                showResults();
            }, 5500);
        }
        
        function calculateFallbackValues() {
            // Fallback calculations for MONTHLY values
            const missedCallsMap = {
                '0-3': 2,
                '4-10': 7,
                '10-20': 15,
                '20+': 25,
                'unsure': 10
            };
            
            const revenueMap = {
                '<1M': 800000,
                '1-3M': 2000000,
                '4-10M': 7000000,
                '10-20M': 15000000,
                '20M+': 25000000
            };
            
            const missedCallsPerDay = missedCallsMap[formData.missedCalls] || 10;
            const annualRevenue = revenueMap[formData.revenue] || 1200000;
            const monthlyRevenue = annualRevenue / 12;
            
            // Monthly calculations
            const monthlyMissedCalls = missedCallsPerDay * 30;
            const aiConversionRate = 0.45;
            const currentConversionRate = 0.30;
            const avgJobValue = 7500;
            
            const additionalJobsMonthly = Math.round(monthlyMissedCalls * (aiConversionRate - currentConversionRate));
            const missedCallRevenue = additionalJobsMonthly * avgJobValue;
            
            // CSR savings (3 CSRs, $45k/year each, AI handles 60%)
            const monthlyCsrCost = (3 * 45000 * 1.3) / 12; // Including overhead
            const csrCostSavings = monthlyCsrCost * 0.6;
            
            // After-hours revenue (35% of calls, 2x value)
            const afterHoursRevenue = (monthlyRevenue * 0.35 * 0.2);
            
            // Efficiency gains (15% improvement)
            const efficiencyGains = monthlyRevenue * 0.15;
            
            const totalMonthlySavings = missedCallRevenue + csrCostSavings + afterHoursRevenue + efficiencyGains;
            const yearlyProjection = totalMonthlySavings * 12;
            
            return {
                totalMonthlySavings: totalMonthlySavings,
                missedCallRevenue: missedCallRevenue,
                csrCostSavings: csrCostSavings,
                afterHoursRevenue: afterHoursRevenue,
                efficiencyGains: efficiencyGains,
                additionalJobsMonthly: additionalJobsMonthly,
                callsSavedMonthly: monthlyMissedCalls,
                roiPercentage: Math.round((totalMonthlySavings / monthlyRevenue) * 100),
                yearlyProjection: yearlyProjection
            };
        }
        
        function showResults() {
            const results = formData.aiResults;
            
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step4').classList.remove('hidden');
            currentStep = 4;
            updateProgress();
            
            // Animate numbers
            animateValue('totalSavings', results.totalMonthlySavings, '$');
            animateValue('missedCallsMetric', results.callsSavedMonthly);
            animateValue('jobsBookedMetric', results.additionalJobsMonthly);
            animateValue('roiMetric', results.roiPercentage, '', '%');
            animateValue('yearlyProjection', results.yearlyProjection, '$');
            
            // Update CTA savings
            document.getElementById('ctaSavings').textContent = Math.round(results.totalMonthlySavings).toLocaleString();
            
            // Show reward tier based on MONTHLY savings
            showRewardTier(results.totalMonthlySavings);
        }
        
        function animateValue(id, value, prefix = '', suffix = '') {
            const element = document.getElementById(id);
            const duration = 2000;
            const increment = value / (duration / 50);
            let current = 0;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= value) {
                    current = value;
                    clearInterval(timer);
                }
                element.textContent = prefix + Math.round(current).toLocaleString() + suffix;
            }, 50);
        }
        
        function showRewardTier(monthlySavings) {
            let tier = {};
            
            if (monthlySavings >= 100000) {
                tier = {
                    title: 'ðŸŒ® Get 100,000 tacos from Taco Bell',
                    description: `With $${Math.round(monthlySavings).toLocaleString()} saved monthly, you could afford a lifetime supply of tacos!`,
                    image: 'https://images.unsplash.com/photo-1565299585323-38d6b0865b47?w=600&h=300&fit=crop'
                };
            } else if (monthlySavings >= 50000) {
                tier = {
                    title: 'ðŸ’’ Pay for your daughter\'s wedding',
                    description: `Saving $${Math.round(monthlySavings).toLocaleString()} monthly means you can give your daughter the wedding of her dreams!`,
                    image: 'https://images.unsplash.com/photo-1519741497674-611481863552?w=600&h=300&fit=crop'
                };
            } else if (monthlySavings >= 25000) {
                tier = {
                    title: 'ðŸ”ï¸ Rent the hunting lodge for you and your friends for the week',
                    description: `$${Math.round(monthlySavings).toLocaleString()}/month gets you exclusive access to premium experiences!`,
                    image: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600&h=300&fit=crop'
                };
            } else if (monthlySavings >= 10000) {
                tier = {
                    title: 'ðŸ… Buy a tiger',
                    description: `$${Math.round(monthlySavings).toLocaleString()} monthly could get you the most exotic pet!`,
                    image: 'https://images.unsplash.com/photo-1549366021-9f761d450615?w=600&h=300&fit=crop'
                };
            } else if (monthlySavings >= 5000) {
                tier = {
                    title: 'ðŸ–ï¸ Weekend trip to Bimini with the family',
                    description: `Save $${Math.round(monthlySavings).toLocaleString()} every month for unforgettable family getaways!`,
                    image: 'https://images.unsplash.com/photo-1540541338287-41700207dee6?w=600&h=300&fit=crop'
                };
            } else {
                tier = {
                    title: 'ðŸ–ï¸ Monthly Getaway Fund!',
                    description: `Save $${Math.round(monthlySavings).toLocaleString()} every month for family experiences!`,
                    image: 'https://images.unsplash.com/photo-1540541338287-41700207dee6?w=600&h=300&fit=crop'
                };
            }
            
            document.getElementById('rewardTitle').textContent = tier.title;
            document.getElementById('rewardDescription').textContent = tier.description;
            document.getElementById('rewardImage').src = tier.image;
        }
        
        // Phone formatting
        document.querySelector('input[name="phone"]').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 6) {
                value = `(${value.slice(0,3)}) ${value.slice(3,6)}-${value.slice(6,10)}`;
            } else if (value.length >= 3) {
                value = `(${value.slice(0,3)}) ${value.slice(3)}`;
            }
            e.target.value = value;
        });
        
        // Initialize
        updateProgress();
    </script>
</body>
</html>
